# NetrekII: Paradise Client Makefile
# Makes librsa.a out of RSA client files.

SHELL=/bin/sh

GMPDIR=../gmp
SCRIPTDIR=../../scripts

# Set some commonly used variables.
CFLAGS=@CFLAGS@
CPP=@CPP@
CPPFLAGS=@CPPFLAGS@ -I$(GMPDIR) -I..
DEFS=@DEFS@ $(SYSDEFS)
CC=@CC@
RANLIB=@RANLIB@

LIBRSA=librsa.a

OBJS=rsa_box.o rsa_box_0.o rsa_box_1.o rsa_box_2.o rsa_box_3.o rsa_box_4.o
EXPOBJS=expire.o

#SRCS = `echo $(BASE_OBJS) | sed -e 's/\.o/.c/g'`
SRCS=${OBJS:.o=.c}

.c.o:
	$(CC) $(CFLAGS) $(CPPFLAGS) $(DEFS) -c $<

all: $(LIBRSA)

$(LIBRSA): $(OBJS) $(EXPOBJS)
	ar cr $(LIBRSA) `${SCRIPTDIR}/scrambleargs $(OBJS)` $(EXPOBJS)
	$(RANLIB) $(LIBRSA)

dust:
	rm -f *~ *.orig *.bak *.BAK
		
clean:
	rm -f $(LIBRSA) $(OBJS) $(EXPOBJS)

patchable: clean dust
	rm -f $(SRCS) Makefile 
